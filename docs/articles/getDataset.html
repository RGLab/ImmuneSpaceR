<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Downloading Datasets with getDataset â€¢ ImmuneSpaceR</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/yeti/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Downloading Datasets with getDataset">
<meta property="og:description" content="ImmuneSpaceR">
<meta property="og:image" content="/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-118281859-1"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-118281859-1');
</script>
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ImmuneSpaceR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.19.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/Intro_to_ImmuneSpaceR.html">An Introduction to the ImmuneSpaceR Package</a>
    </li>
    <li>
      <a href="../articles/getDataset.html">Downloading Datasets with getDataset</a>
    </li>
    <li>
      <a href="../articles/getGEMatrix.html">Handling Expression Matrices with ImmuneSpaceR</a>
    </li>
    <li>
      <a href="../articles/interactiveNetrc.html">interactive_netrc() Function Walkthrough</a>
    </li>
    <li>
      <a href="../articles/report_SDY144.html">SDY144: Correlation of HAI/Virus Neutralizition Titer and Cell Counts</a>
    </li>
    <li>
      <a href="../articles/report_SDY180.html">SDY180: Abundance of Plasmablasts Measured by Multiparameter Flow Cytometry</a>
    </li>
    <li>
      <a href="../articles/report_SDY269.html">SDY269: Correlating HAI with Flow Cytometry and ELISPOT Results</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://www.immunespace.org/">
    <span class="fas fa-globe"></span>
     
  </a>
</li>
<li>
  <a href="https://twitter.com/ImmuneSpace">
    <span class="fas fa-twitter"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/RGLab/ImmuneSpaceR">
    <span class="fas fa-github"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="getDataset_files/header-attrs-2.7/header-attrs.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Downloading Datasets with getDataset</h1>
                        <h4 class="author">Renan Sauteraud</h4>
            
            <h4 class="date">2021-04-27</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/RGLab/ImmuneSpaceR/blob/master/vignettes/getDataset.Rmd"><code>vignettes/getDataset.Rmd</code></a></small>
      <div class="hidden name"><code>getDataset.Rmd</code></div>

    </div>

    
    
<p>This vignette shows detailed examples for all functionalities of the <code>getDataset</code> method.</p>
<div id="create-connections" class="section level1">
<h1 class="hasAnchor">
<a href="#create-connections" class="anchor"></a>Create connections</h1>
<p>As explained into the introductory vignette, datasets must be downloaded from <code>ImmuneSpaceConnection</code> objects. We must first instantiate a connection to the study or studies of interest. Throughout this vignette, we will use two connections, one to a single study, and one to to all available data.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/RGLab/ImmuneSpaceR">ImmuneSpaceR</a></span><span class="op">)</span>
<span class="va">sdy269</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/CreateConnection.html">CreateConnection</a></span><span class="op">(</span><span class="st">"SDY269"</span><span class="op">)</span>
<span class="va">all</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/CreateConnection.html">CreateConnection</a></span><span class="op">(</span><span class="st">""</span><span class="op">)</span></code></pre></div>
</div>
<div id="list-the-datasets" class="section level1">
<h1 class="hasAnchor">
<a href="#list-the-datasets" class="anchor"></a>List the datasets</h1>
<p>Now that the connections have been instantiated, we can start downloading from themm but we need to figure out which datasets are available within our chosen studies. Printing the connections will, among other information, list the datasets availables. The <code>listDatasets</code> method will display only the information we are looking for.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">sdy269</span><span class="op">$</span><span class="fu">listDatasets</span><span class="op">(</span><span class="op">)</span></code></pre></div>
<pre><code>## datasets
##  cohort_membership
##  demographics
##  elisa
##  elispot
##  fcs_analyzed_result
##  fcs_sample_files
##  gene_expression_files
##  hai
##  pcr
## Expression Matrices
##  SDY269_PBMC_TIV_Geo
##  SDY269_PBMC_LAIV_Geo</code></pre>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">all</span><span class="op">$</span><span class="fu">listDatasets</span><span class="op">(</span><span class="op">)</span></code></pre></div>
<pre><code>## datasets
##  cohort_membership
##  demographics
##  elisa
##  elispot
##  fcs_analyzed_result
##  fcs_control_files
##  fcs_sample_files
##  gene_expression_files
##  hai
##  hla_typing
##  mbaa
##  neut_ab_titer
##  pcr
## Expression Matrices
##  SDY1630_Spleen_AllSubjects
##  SDY1630_PBMC_AllSubjects
##  SDY1630_LungLymphNode_AllSubjects
##  SDY1630_Lung_AllSubjects
##  SDY1630_BoneMarrow_AllSubjects
##  SDY1529_WholeBlood_HealthyAdults_PreVax_Geo
##  SDY1529_WholeBlood_HealthyAdults_PostVax_Geo
##  SDY787_Tcell_wPaPboost_Geo
##  SDY787_Tcell_aP_Geo
##  SDY787_Tcell_aPaPboost_Geo
##  SDY1328_WholeBlood_HealthyAldults_Geo
##  SDY520_WholeBlood_Young_geo
##  SDY520_WholeBlood_Older_Geo
##  SDY640_WholeBlood_Young_Geo
##  SDY640_WholeBlood_Older_Geo
##  SDY1086_PBMC_GroupB_Geo
##  SDY1086_PBMC_GroupA_Geo
##  SDY1267_PBMC_RRR_Geo
##  SDY1267_PBMC_ARR_Geo
##  SDY1412_WholeBlood_EPC002_geo
##  SDY1256_WholeBlood_EPIC001_geo
##  SDY645_WholeBlood_JuvDM
##  SDY376_WholeBlood_JDM
##  SDY80_PBMC_Cohort2_geo
##  SDY299_WholeBlood_HEPISLAV
##  SDY180_WholeBlood_Grp2Saline_Geo
##  SDY180_WholeBlood_Grp2Pneunomax23_Geo
##  SDY180_WholeBlood_Grp2Fluzone_Geo
##  SDY180_WholeBlood_Grp1Saline_Geo
##  SDY180_WholeBlood_Grp1Pneunomax23_Geo
##  SDY180_WholeBlood_Grp1Fluzone_Geo
##  SDY1325_WholeBlood_LowIntraMuscularPS_geo
##  SDY1294_PBMC_ChineseCohort_Geo
##  SDY1119_PBMC_oldHealthy_Geo
##  SDY1119_PBMC_oldT2D_Geo
##  SDY1119_PBMC_youngT2D_Geo
##  SDY1119_PBMC_youngHealthy_Geo
##  SDY1289_WholeBlood_MontrealCohort_Geo
##  SDY1289_WholeBlood_LausanneCohort_Geo
##  SDY1324_PBMC_nonBCGvacc
##  SDY1324_PBMC_LatentTB
##  SDY1324_PBMC_BCGvacc
##  SDY89_WholeBlood_EnergixB
##  SDY1370_Bcell_lc16m8_geo
##  SDY1370_Bcell_dryvax_geo
##  SDY1370_Tcell_lc16m8_geo
##  SDY1370_Tcell_dryvax_geo
##  SDY1370_PBMC_lc16m8_geo
##  SDY1370_PBMC_dryvax_geo
##  SDY1368_WholeBlood_Twin_Geo
##  SDY1368_WholeBlood_NonTwin_Geo
##  SDY67_PBMC_HealthyAdults
##  SDY224_PBMC_TIV2010_ImmPort
##  SDY888_PBMC_UninfectedEndemicArea_Geo
##  SDY888_PBMC_UninfectedNonEndemicArea_Geo
##  SDY888_PBMC_InfectedEndemicArea_Geo
##  SDY28_PBMC_Dryvax
##  SDY34_PBMC_TIV
##  SDY34_PBMC_Controls
##  SDY305_Other_IDTIV_Geo
##  SDY305_Other_TIV_Geo
##  SDY112_Other_GroupC
##  SDY112_Other_GroupB
##  SDY112_Other_GroupA
##  SDY315_Other_GroupC_Geo
##  SDY315_Other_GroupB_Geo
##  SDY315_Other_GroupA_Geo
##  SDY406_Other_ILI_Geo
##  SDY113_Other_IDTIV_Geo
##  SDY113_Other_LAIV_Geo
##  SDY113_Other_TIV_Geo
##  SDY144_Other_TIV_Geo
##  SDY690_PBMC_Energixb
##  SDY690_WholeBlood_Energixb
##  SDY597_Other_InVitro
##  SDY522_Other_LAIV
##  SDY387_WholeBlood_NCH2010
##  SDY372_WholeBlood_JDM2012
##  SDY368_WholeBlood_NCH2013
##  SDY364_WholeBlood_NCH2012
##  SDY312_Other_GroupC
##  SDY312_Other_GroupB
##  SDY312_Other_GroupA
##  SDY301_Other_AIRFV
##  SDY296_WholeBlood_AIRFV
##  SDY667_WholeBlood_PSORPPP
##  SDY212_WholeBlood_Older_Geo
##  SDY212_WholeBlood_Young_Geo
##  SDY212_PBMC_Older_Geo
##  SDY212_PBMC_Young_geo
##  SDY270_PBMC_TIVGroup_Geo
##  SDY1373_WholeBlood_highDose_Geo
##  SDY1373_WholeBlood_lowDose_Geo
##  SDY1364_PBMC_IntraDermal_Geo
##  SDY1364_PBMC_IntraMuscular_Geo
##  SDY1325_WholeBlood_IntramuscularCRM_Geo
##  SDY1325_WholeBlood_IntramuscularPS_Geo
##  SDY1325_WholeBlood_SubcutaneousPS_Geo
##  SDY1291_PBMC_HealthyHIVUninfected_Geo
##  SDY1293_PBMC_Vaccinated_geo
##  SDY1293_PBMC_Control_Geo
##  SDY1276_WholeBlood_Validation_Geo
##  SDY1276_WholeBlood_Discovery_Geo
##  SDY1264_PBMC_Trial2_Geo
##  SDY1264_PBMC_Trial1_Geo
##  SDY1260_PBMC_MCV4_Geo
##  SDY1260_PBMC_MPSV4_Geo
##  SDY984_PBMC_Elderly_Geo
##  SDY984_PBMC_Young_Geo
##  SDY61_PBMC_TIVGrp
##  SDY56_PBMC_Older
##  SDY56_PBMC_Young
##  SDY63_PBMC_Young_Geo
##  SDY63_PBMC_Older_Geo
##  SDY404_PBMC_Young_Geo
##  SDY404_PBMC_Older_Geo
##  SDY400_PBMC_Older_Geo
##  SDY400_PBMC_Young_Geo
##  SDY269_PBMC_TIV_Geo
##  SDY269_PBMC_LAIV_Geo
##  SDY300_dendriticCell_dcMonoFlu2011
##  SDY300_otherCell_dcMonoFlu2011
##  SDY162_Macrophage_VLplus
##  SDY162_PBMC_VLplus
##  SDY162_Macrophage_VLminus
##  SDY162_PBMC_VLminus</code></pre>
<p>Naturally, <code>all</code> contains every dataset available on ImmuneSpace as it combines all available studies. Additionaly, when creating connection object with <code>verbose = TRUE</code>, a call to the <code>getDataset</code> method with an invalid dataset name will return the list of valid datasets.</p>
</div>
<div id="download" class="section level1">
<h1 class="hasAnchor">
<a href="#download" class="anchor"></a>Download</h1>
<p>Calling <code>getDataset</code> returns a selected dataset as it is displayed on ImmuneSpace.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">hai_269</span> <span class="op">&lt;-</span> <span class="va">sdy269</span><span class="op">$</span><span class="fu">getDataset</span><span class="op">(</span><span class="st">"hai"</span><span class="op">)</span>
<span class="va">hai_all</span> <span class="op">&lt;-</span> <span class="va">all</span><span class="op">$</span><span class="fu">getDataset</span><span class="op">(</span><span class="st">"hai"</span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">hai_269</span><span class="op">)</span></code></pre></div>
<pre><code>##    participant_id age_reported gender  race          cohort
## 1:  SUB112829.269           26   Male White LAIV group 2008
## 2:  SUB112829.269           26   Male White LAIV group 2008
## 3:  SUB112829.269           26   Male White LAIV group 2008
## 4:  SUB112829.269           26   Male White LAIV group 2008
## 5:  SUB112829.269           26   Male White LAIV group 2008
## 6:  SUB112829.269           26   Male White LAIV group 2008
##    study_time_collected study_time_collected_unit                  virus
## 1:                    0                      Days A/South Dakota/06/2007
## 2:                    0                      Days     A/Uruguay/716/2007
## 3:                    0                      Days       B/Florida/4/2006
## 4:                   28                      Days A/South Dakota/06/2007
## 5:                   28                      Days     A/Uruguay/716/2007
## 6:                   28                      Days       B/Florida/4/2006
##    value_preferred
## 1:              40
## 2:              40
## 3:              20
## 4:              40
## 5:              40
## 6:              40</code></pre>
<p>Because some datasets such as flow cytometry results can contain a large number of rows, the method returns <code>data.table</code> objects to improve performance. This is especially important with multi-study connections.</p>
</div>
<div id="filters" class="section level1">
<h1 class="hasAnchor">
<a href="#filters" class="anchor"></a>Filters</h1>
<p>The datasets can be filtered before download. Filters should be created using <code>Rlabkey</code>â€™s <code>makeFilter</code> function.</p>
<p>Each filter is composed of three part: * A column name or column label * An operator * A value or array of values separated by a semi-colon</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">Rlabkey</span><span class="op">)</span></code></pre></div>
<pre><code>## Loading required package: httr</code></pre>
<pre><code>## Loading required package: jsonlite</code></pre>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Get participants under age of 30</span>
<span class="va">young_filter</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/Rlabkey/man/makeFilter.html">makeFilter</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"age_reported"</span>, <span class="st">"LESS_THAN"</span>, <span class="fl">30</span><span class="op">)</span><span class="op">)</span>

<span class="co"># Get a specific list of two participants</span>
<span class="va">pid_filter</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/Rlabkey/man/makeFilter.html">makeFilter</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"participantid"</span>, <span class="st">"IN"</span>, <span class="st">"SUB112841.269;SUB112834.269"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p>For a list of available operators, see <code><a href="https://rdrr.io/pkg/Rlabkey/man/makeFilter.html">?Rlabkey::makeFilter</a></code>.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># HAI data for participants of study SDY269 under age of 30</span>
<span class="va">hai_young</span> <span class="op">&lt;-</span> <span class="va">sdy269</span><span class="op">$</span><span class="fu">getDataset</span><span class="op">(</span><span class="st">"hai"</span>, colFilter <span class="op">=</span> <span class="va">young_filter</span><span class="op">)</span>

<span class="co"># List of participants under age 30</span>
<span class="va">demo_young</span> <span class="op">&lt;-</span> <span class="va">all</span><span class="op">$</span><span class="fu">getDataset</span><span class="op">(</span><span class="st">"demographics"</span>, colFilter <span class="op">=</span> <span class="va">young_filter</span><span class="op">)</span>

<span class="co"># ELISPOT assay results for two participants</span>
<span class="va">mbaa_pid2</span> <span class="op">&lt;-</span> <span class="va">all</span><span class="op">$</span><span class="fu">getDataset</span><span class="op">(</span><span class="st">"elispot"</span>, colFilter <span class="op">=</span> <span class="va">pid_filter</span><span class="op">)</span></code></pre></div>
<p>Note that filtering is done before download. When performance is a concern, it is faster to do the filtering via the <code>colfFilter</code> argument than on the returned table.</p>
</div>
<div id="views" class="section level1">
<h1 class="hasAnchor">
<a href="#views" class="anchor"></a>Views</h1>
<p>Any dataset grid on ImmuneSpace offers the possibility to switch views between â€˜Defaultâ€™ and â€˜Fullâ€™. The Default view contains information that is directly relevant to the user. Sample description and results are joined with basic demographic. However, this is not the way data is organized in the database. The â€˜Fullâ€™ view is a representation of the data as it is stored on <a href="http://www.immport.org/immport-open/public/home/home">ImmPort</a>. The accession columns are used under the hood for join operations. They will be useful to developers and user writing reports to be displayed in ImmuneSpace studies.</p>
<p><img src="img/getDataset-views.png" width="675"></p>
<p>Screen capture of the button bar of a dataset grid on ImmuneSpace.</p>
<p>The <code>original_view</code> argument decides which view is downloaded. If set to <code>TRUE</code>, the â€˜Fullâ€™ view is returned.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">full_hai</span> <span class="op">&lt;-</span> <span class="va">sdy269</span><span class="op">$</span><span class="fu">getDataset</span><span class="op">(</span><span class="st">"hai"</span>, original_view <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span><span class="op">(</span><span class="va">full_hai</span><span class="op">)</span></code></pre></div>
<pre><code>##  [1] "participant_id"            "arm_accession"            
##  [3] "biosample_accession"       "expsample_accession"      
##  [5] "experiment_accession"      "study_accession"          
##  [7] "study_time_collected"      "study_time_collected_unit"
##  [9] "virus"                     "value_reported"           
## [11] "value_preferred"           "unit_reported"            
## [13] "unit_preferred"</code></pre>
<p>For additional information, refer to the <a href="https://www.youtube.com/watch?v=69k8DquDK7o">â€˜Working with tabular dataâ€™</a> video tutorial.</p>
</div>
<div id="caching" class="section level1">
<h1 class="hasAnchor">
<a href="#caching" class="anchor"></a>Caching</h1>
<p>As explained in the introductory guide, the <code>ImmuneSpaceConnection</code> class is a <a href="https://cran.r-project.org/web/packages/R6/index.html"><code>R6</code></a> class. It means its objects have fields accessed by reference. As a consequence, they can be modified without making a copy of the entire object. ImmuneSpaceR uses this feature to store downloaded datasets and expression matrices. Subsequent calls to <code>getDataset</code> with the same input will be faster.</p>
<p>See <code><a href="https://r6.r-lib.org/reference/R6Class.html">?R6::R6Class</a></code> for more information about R6 class system.</p>
<p>We can see the data currently cached using the <code>cache</code> field. This is not intended to be used for data manipulation and only displayed here to explain what gets cached.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">pcr</span> <span class="op">&lt;-</span> <span class="va">sdy269</span><span class="op">$</span><span class="fu">getDataset</span><span class="op">(</span><span class="st">"pcr"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">sdy269</span><span class="op">$</span><span class="va">cache</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "GE_matrices"                      "a686d76d73f361f98814f8a71771a3b4"
## [3] "b1fc871b0317b0835fcd962f804ca1e8" "eca5f7a1d74ad1de545fd45b773f8f68"
## [5] "0518ce2a79b128c0fdf56d816576dd9c"</code></pre>
<p>Different views are saved separately.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">pcr_ori</span> <span class="op">&lt;-</span> <span class="va">sdy269</span><span class="op">$</span><span class="fu">getDataset</span><span class="op">(</span><span class="st">"pcr"</span>, original_view <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">sdy269</span><span class="op">$</span><span class="va">cache</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "GE_matrices"                      "a686d76d73f361f98814f8a71771a3b4"
## [3] "b1fc871b0317b0835fcd962f804ca1e8" "eca5f7a1d74ad1de545fd45b773f8f68"
## [5] "0518ce2a79b128c0fdf56d816576dd9c" "ef3cb0b3940dde6bf773a36e93651cc4"</code></pre>
<p>Because of the infinite number of filters and combinations of filters, we do not cache filtered datasets.</p>
<p>If, for any reason, a specific dataset needs to be redownloaded, the <code>reload</code> argument will clear the cache for that specific <code>getDataset</code> call and download the table again.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">hai_269</span> <span class="op">&lt;-</span> <span class="va">sdy269</span><span class="op">$</span><span class="fu">getDataset</span><span class="op">(</span><span class="st">"hai"</span>, reload <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<p>Finally, it is possible to clear every cached dataset (and expression matrix).</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">sdy269</span><span class="op">$</span><span class="fu">clearCache</span><span class="op">(</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">sdy269</span><span class="op">$</span><span class="va">cache</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "GE_matrices"</code></pre>
<p>Again, the <code>cache</code> field should never be modified manually. When in doubt, simply reload the dataset.</p>
</div>
<div id="session-info" class="section level1">
<h1 class="hasAnchor">
<a href="#session-info" class="anchor"></a>Session info</h1>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/sessionInfo.html">sessionInfo</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<pre><code>## R version 4.0.3 (2020-10-10)
## Platform: x86_64-apple-darwin17.0 (64-bit)
## Running under: macOS Big Sur 10.16
## 
## Matrix products: default
## BLAS:   /Library/Frameworks/R.framework/Versions/4.0/Resources/lib/libRblas.dylib
## LAPACK: /Library/Frameworks/R.framework/Versions/4.0/Resources/lib/libRlapack.dylib
## 
## locale:
## [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
## 
## attached base packages:
## [1] stats     graphics  grDevices utils     datasets  methods   base     
## 
## other attached packages:
## [1] Rlabkey_2.6.0       jsonlite_1.7.2      httr_1.4.2         
## [4] ImmuneSpaceR_1.19.2 knitr_1.31         
## 
## loaded via a namespace (and not attached):
##  [1] ncdfFlow_2.36.0       bitops_1.0-6          matrixStats_0.58.0   
##  [4] fs_1.5.0              webshot_0.5.2         RColorBrewer_1.1-2   
##  [7] rprojroot_2.0.2       Rgraphviz_2.34.0      tools_4.0.3          
## [10] bslib_0.2.4           utf8_1.1.4            R6_2.5.0             
## [13] KernSmooth_2.23-17    lazyeval_0.2.2        BiocGenerics_0.36.0  
## [16] colorspace_2.0-0      flowWorkspace_4.2.0   tidyselect_1.1.0     
## [19] gridExtra_2.3         preprocessCore_1.52.1 curl_4.3             
## [22] compiler_4.0.3        textshaping_0.3.3     graph_1.68.0         
## [25] Biobase_2.50.0        TSP_1.1-10            xml2_1.3.2           
## [28] desc_1.2.0            plotly_4.9.3          sass_0.3.1           
## [31] caTools_1.18.1        scales_1.1.1          pkgdown_1.6.1        
## [34] systemfonts_1.0.1     stringr_1.4.0         digest_0.6.27        
## [37] rmarkdown_2.7         base64enc_0.1-3       jpeg_0.1-8.1         
## [40] pkgconfig_2.0.3       htmltools_0.5.1.1     fastmap_1.1.0        
## [43] htmlwidgets_1.5.3     rlang_0.4.10          flowCore_2.2.0       
## [46] jquerylib_0.1.3       generics_0.1.0        gtools_3.8.2         
## [49] dendextend_1.14.0     dplyr_1.0.4           magrittr_2.0.1       
## [52] RProtoBufLib_2.2.0    Rcpp_1.0.6            munsell_0.5.0        
## [55] S4Vectors_0.28.1      fansi_0.4.2           viridis_0.5.1        
## [58] lifecycle_1.0.0       stringi_1.5.3         yaml_2.2.1           
## [61] zlibbioc_1.36.0       gplots_3.1.1          grid_4.0.3           
## [64] parallel_4.0.3        crayon_1.4.1          lattice_0.20-41      
## [67] pillar_1.5.0          codetools_0.2-16      stats4_4.0.3         
## [70] XML_3.99-0.5          glue_1.4.2            evaluate_0.14        
## [73] latticeExtra_0.6-29   data.table_1.14.0     RcppParallel_5.0.3   
## [76] foreach_1.5.1         png_0.1-7             vctrs_0.3.6          
## [79] tidyr_1.1.2           gtable_0.3.0          aws.s3_0.3.21        
## [82] purrr_0.3.4           heatmaply_1.2.1       assertthat_0.2.1     
## [85] cachem_1.0.4          ggplot2_3.3.3         xfun_0.21            
## [88] ragg_1.1.2            viridisLite_0.3.0     pheatmap_1.0.12      
## [91] seriation_1.2-9       tibble_3.1.0          iterators_1.0.13     
## [94] registry_0.5-1        cytolib_2.2.1         aws.signature_0.6.0  
## [97] memoise_2.0.0         ellipsis_0.3.1</code></pre>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Greg Finak, Renan Sauteraud, Mike Jiang, Gil Guday, Leo Dashevskiy, Evan Henrich, Ju Yeong Kim, Lauren Wolfe, Helen Miller, Raphael Gottardo, ImmuneSpace Package Maintainer.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
