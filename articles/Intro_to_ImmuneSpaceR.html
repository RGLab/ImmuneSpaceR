<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>An Introduction to the ImmuneSpaceR Package • ImmuneSpaceR</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/yeti/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="An Introduction to the ImmuneSpaceR Package">
<meta property="og:description" content="ImmuneSpaceR">
<meta property="og:image" content="/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-118281859-1"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-118281859-1');
</script>
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ImmuneSpaceR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.27.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/Intro_to_ImmuneSpaceR.html">An Introduction to the ImmuneSpaceR Package</a>
    </li>
    <li>
      <a href="../articles/getDataset.html">Downloading Datasets with getDataset</a>
    </li>
    <li>
      <a href="../articles/getGEMatrix.html">Handling Expression Matrices with ImmuneSpaceR</a>
    </li>
    <li>
      <a href="../articles/interactiveNetrc.html">interactive_netrc() Function Walkthrough</a>
    </li>
    <li>
      <a href="../articles/report_SDY144.html">SDY144: Correlation of HAI/Virus Neutralizition Titer and Cell Counts</a>
    </li>
    <li>
      <a href="../articles/report_SDY180.html">SDY180: Abundance of Plasmablasts Measured by Multiparameter Flow Cytometry</a>
    </li>
    <li>
      <a href="../articles/report_SDY269.html">SDY269: Correlating HAI with Flow Cytometry and ELISPOT Results</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://datatools.immunespace.org/" class="external-link">
    <span class="fa fa-globe"></span>
     
  </a>
</li>
<li>
  <a href="https://twitter.com/ImmuneSpace" class="external-link">
    <span class="fa fa-twitter"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/RGLab/ImmuneSpaceR" class="external-link">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="Intro_to_ImmuneSpaceR_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>An Introduction to the ImmuneSpaceR Package</h1>
                        <h4 data-toc-skip class="author">Renan Sauteraud</h4>
            
            <h4 data-toc-skip class="date">2022-12-14</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/RGLab/ImmuneSpaceR/blob/HEAD/vignettes/Intro_to_ImmuneSpaceR.Rmd" class="external-link"><code>vignettes/Intro_to_ImmuneSpaceR.Rmd</code></a></small>
      <div class="hidden name"><code>Intro_to_ImmuneSpaceR.Rmd</code></div>

    </div>

    
    
<p>This package provides a <em>thin</em> wrapper around <a href="https://cran.r-project.org/web/packages/Rlabkey/index.html" class="external-link"><code>Rlabkey</code></a> and connects to the <a href="https://datatools.immunespace.org" class="external-link">ImmuneSpace</a> database, making it easier to fetch datasets, including gene expression data, HAI, and so forth, from specific studies.</p>
<div class="section level2">
<h2 id="configuration">Configuration<a class="anchor" aria-label="anchor" href="#configuration"></a>
</h2>
<p>In order to connect to ImmuneSpace, you will need a netrc file in your home directory.</p>
<p><strong>Set up your netrc file now!</strong></p>
<p>If you’re not familiar with the command-line interface, there is the <code><a href="../reference/interactive_netrc.html">interactive_netrc()</a></code> function to set up your netrc file. See <a href="https://rglab.github.io/ImmuneSpaceR/articles/interactiveNetrc.html" class="external-link">the <code>interactive_netrc</code> vignette</a>.</p>
<p>Or create netrc file in the computer running R:</p>
<ul>
<li>On a <strong>UNIX</strong> system, this file should be named <code>.netrc</code>
</li>
<li>On <strong>Windows</strong>, it sould be named <code>_netrc</code>
</li>
<li>The file should be located in the user’s <strong>home</strong> directory</li>
<li>To determine home directory, run <code>Sys.getenv("HOME")</code> in R</li>
<li>The permissions on this file should be unreadable for everybody except the owner</li>
</ul>
<p>The following three lines must be included in the <code>.netrc</code> or <code>_netrc</code> file either separated by white space (spaces, tabs, or newlines) or commas.</p>
<pre><code>machine datatools.immunespace.org
login myUser@mySite.com
password superSecretPassword</code></pre>
<p>Multiple such blocks can exist in one file. Please ensure that the machine name in the netrc file contains the “datatools” subdomain as that is how the package connects to immunespace by default. A mismatch will lead to connection failures.</p>
<p>See <a href="https://www.labkey.org/wiki/home/Documentation/page.view?name=netrc" class="external-link">the official LabKey documentation</a> for more information.</p>
</div>
<div class="section level2">
<h2 id="instantiate-a-connection">Instantiate a connection<a class="anchor" aria-label="anchor" href="#instantiate-a-connection"></a>
</h2>
<p>We’ll be looking at study <code>SDY269</code>. If you want to use a different study, change that string. The connections have state, so you can instantiate multiple connections to different studies simultaneously.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/RGLab/ImmuneSpaceR" class="external-link">ImmuneSpaceR</a></span><span class="op">)</span></span>
<span><span class="va">sdy269</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/CreateConnection.html">CreateConnection</a></span><span class="op">(</span>study <span class="op">=</span> <span class="st">"SDY269"</span><span class="op">)</span></span>
<span><span class="va">sdy269</span></span></code></pre></div>
<pre><code><span><span class="co">## &lt;ImmuneSpaceConnection&gt;</span></span>
<span><span class="co">##   Study: SDY269</span></span>
<span><span class="co">##   URL: https://datatools.immunespace.org/Studies/SDY269</span></span>
<span><span class="co">##   User: unknown_user at not_a_domain.com</span></span>
<span><span class="co">##   9 Available Datasets</span></span>
<span><span class="co">##     - cohort_membership</span></span>
<span><span class="co">##     - demographics</span></span>
<span><span class="co">##     - elisa</span></span>
<span><span class="co">##     - elispot</span></span>
<span><span class="co">##     - fcs_analyzed_result</span></span>
<span><span class="co">##     - fcs_sample_files</span></span>
<span><span class="co">##     - gene_expression_files</span></span>
<span><span class="co">##     - hai</span></span>
<span><span class="co">##     - pcr</span></span>
<span><span class="co">##   2 Available Expression Matrices</span></span></code></pre>
<p>The call to <code>CreateConnection</code> instantiates the connection. Printing the object shows where it’s connected, to what study, and the available data sets and gene expression matrices.</p>
<p>Note that when a script is running on ImmuneSpace, some variables set in the global environments will automatically indicate which study should be used and the <code>study</code> argument can be skipped.</p>
</div>
<div class="section level2">
<h2 id="fetching-datasets">Fetching datasets<a class="anchor" aria-label="anchor" href="#fetching-datasets"></a>
</h2>
<p>We can grab any of the datasets listed in the connection.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sdy269</span><span class="op">$</span><span class="fu">getDataset</span><span class="op">(</span><span class="st">"hai"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##      participant_id age_reported gender  race          cohort</span></span>
<span><span class="co">##   1:  SUB112829.269           26   Male White LAIV group 2008</span></span>
<span><span class="co">##   2:  SUB112829.269           26   Male White LAIV group 2008</span></span>
<span><span class="co">##   3:  SUB112829.269           26   Male White LAIV group 2008</span></span>
<span><span class="co">##   4:  SUB112829.269           26   Male White LAIV group 2008</span></span>
<span><span class="co">##   5:  SUB112829.269           26   Male White LAIV group 2008</span></span>
<span><span class="co">##  ---                                                         </span></span>
<span><span class="co">## 332:  SUB112888.269           34 Female White  TIV Group 2008</span></span>
<span><span class="co">## 333:  SUB112888.269           34 Female White  TIV Group 2008</span></span>
<span><span class="co">## 334:  SUB112888.269           34 Female White  TIV Group 2008</span></span>
<span><span class="co">## 335:  SUB112888.269           34 Female White  TIV Group 2008</span></span>
<span><span class="co">## 336:  SUB112888.269           34 Female White  TIV Group 2008</span></span>
<span><span class="co">##      study_time_collected study_time_collected_unit                  virus</span></span>
<span><span class="co">##   1:                    0                      Days A/South Dakota/06/2007</span></span>
<span><span class="co">##   2:                    0                      Days     A/Uruguay/716/2007</span></span>
<span><span class="co">##   3:                    0                      Days       B/Florida/4/2006</span></span>
<span><span class="co">##   4:                   28                      Days A/South Dakota/06/2007</span></span>
<span><span class="co">##   5:                   28                      Days     A/Uruguay/716/2007</span></span>
<span><span class="co">##  ---                                                                      </span></span>
<span><span class="co">## 332:                    0                      Days     A/Uruguay/716/2007</span></span>
<span><span class="co">## 333:                    0                      Days      B/Brisbane/3/2007</span></span>
<span><span class="co">## 334:                   28                      Days     A/Brisbane/59/2007</span></span>
<span><span class="co">## 335:                   28                      Days     A/Uruguay/716/2007</span></span>
<span><span class="co">## 336:                   28                      Days      B/Brisbane/3/2007</span></span>
<span><span class="co">##      value_preferred</span></span>
<span><span class="co">##   1:              40</span></span>
<span><span class="co">##   2:              40</span></span>
<span><span class="co">##   3:              20</span></span>
<span><span class="co">##   4:              40</span></span>
<span><span class="co">##   5:              40</span></span>
<span><span class="co">##  ---                </span></span>
<span><span class="co">## 332:               5</span></span>
<span><span class="co">## 333:             320</span></span>
<span><span class="co">## 334:              80</span></span>
<span><span class="co">## 335:              40</span></span>
<span><span class="co">## 336:              40</span></span></code></pre>
<p>The <em>sdy269</em> object is an <strong>R6</strong> class, so it behaves like a true object. Methods (like <code>getDataset</code>) are members of the object, thus the <code>$</code> semantics to access member functions.</p>
<p>The first time you retrieve a dataset, it will contact the database. The data is cached in the object, so the next time you call <code>getDataset</code> on the same dataset, it will retrieve the cached local copy. This is much faster.</p>
<p>To get only a subset of the data and speed up the download, filters can be passed to <code>getDataset</code>. The filters are created using the <code>makeFilter</code> function of the <code>Rlabkey</code> package.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">Rlabkey</span><span class="op">)</span></span>
<span><span class="va">myFilter</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/Rlabkey/man/makeFilter.html" class="external-link">makeFilter</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"gender"</span>, <span class="st">"EQUAL"</span>, <span class="st">"Female"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">hai</span> <span class="op">&lt;-</span> <span class="va">sdy269</span><span class="op">$</span><span class="fu">getDataset</span><span class="op">(</span><span class="st">"hai"</span>, colFilter <span class="op">=</span> <span class="va">myFilter</span><span class="op">)</span></span></code></pre></div>
<p>See <code><a href="https://rdrr.io/pkg/Rlabkey/man/makeFilter.html" class="external-link">?Rlabkey::makeFilter</a></code> for more information on the syntax.</p>
<p>For more information about <code>getDataset</code>’s options, refer to the dedicated vignette.</p>
</div>
<div class="section level2">
<h2 id="fetching-expression-matrices">Fetching expression matrices<a class="anchor" aria-label="anchor" href="#fetching-expression-matrices"></a>
</h2>
<p>We can also grab a gene expression matrix</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sdy269</span><span class="op">$</span><span class="fu">getGEMatrix</span><span class="op">(</span><span class="st">"SDY269_PBMC_LAIV_Geo"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Downloading matrix..</span></span></code></pre>
<pre><code><span><span class="co">## Constructing ExpressionSet</span></span></code></pre>
<pre><code><span><span class="co">## ExpressionSet (storageMode: lockedEnvironment)</span></span>
<span><span class="co">## assayData: 16146 features, 83 samples </span></span>
<span><span class="co">##   element names: exprs </span></span>
<span><span class="co">## protocolData: none</span></span>
<span><span class="co">## phenoData</span></span>
<span><span class="co">##   sampleNames: BS586100 BS586156 ... BS586239 (83 total)</span></span>
<span><span class="co">##   varLabels: participant_id study_time_collected ...</span></span>
<span><span class="co">##     exposure_process_preferred (8 total)</span></span>
<span><span class="co">##   varMetadata: labelDescription</span></span>
<span><span class="co">## featureData</span></span>
<span><span class="co">##   featureNames: DDR1 RFC2 ... NUS1P3 (16146 total)</span></span>
<span><span class="co">##   fvarLabels: FeatureId gene_symbol</span></span>
<span><span class="co">##   fvarMetadata: labelDescription</span></span>
<span><span class="co">## experimentData: use 'experimentData(object)'</span></span>
<span><span class="co">## Annotation:</span></span></code></pre>
<p>The object contacts the database and downloads the matrix file. This is stored and cached locally as a <code>data.table</code>. The next time you access it, it will be much faster since it won’t need to contact the database again.</p>
<p>It is also possible to call this function using multiple matrix names. In this case, all the matrices are downloaded and combined into a single <code>ExpressionSet</code>.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sdy269</span><span class="op">$</span><span class="fu">getGEMatrix</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"SDY269_PBMC_TIV_Geo"</span>, <span class="st">"SDY269_PBMC_LAIV_Geo"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Downloading matrix..</span></span></code></pre>
<pre><code><span><span class="co">## Constructing ExpressionSet</span></span></code></pre>
<pre><code><span><span class="co">## Returning SDY269_PBMC_LAIV_Geo_summary_latest_eset from cache</span></span></code></pre>
<pre><code><span><span class="co">## Combining ExpressionSets</span></span></code></pre>
<pre><code><span><span class="co">## ExpressionSet (storageMode: lockedEnvironment)</span></span>
<span><span class="co">## assayData: 16146 features, 163 samples </span></span>
<span><span class="co">##   element names: exprs </span></span>
<span><span class="co">## protocolData: none</span></span>
<span><span class="co">## phenoData</span></span>
<span><span class="co">##   sampleNames: BS586128 BS586240 ... BS586239 (163 total)</span></span>
<span><span class="co">##   varLabels: participant_id study_time_collected ...</span></span>
<span><span class="co">##     exposure_process_preferred (8 total)</span></span>
<span><span class="co">##   varMetadata: labelDescription</span></span>
<span><span class="co">## featureData</span></span>
<span><span class="co">##   featureNames: 1 2 ... 16146 (16146 total)</span></span>
<span><span class="co">##   fvarLabels: FeatureId gene_symbol</span></span>
<span><span class="co">##   fvarMetadata: labelDescription</span></span>
<span><span class="co">## experimentData: use 'experimentData(object)'</span></span>
<span><span class="co">## Annotation:</span></span></code></pre>
<p>Finally, the summary argument will let you download the matrix with gene symbols in place of probe ids.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gs</span> <span class="op">&lt;-</span> <span class="va">sdy269</span><span class="op">$</span><span class="fu">getGEMatrix</span><span class="op">(</span><span class="st">"SDY269_PBMC_TIV_Geo"</span>, outputType <span class="op">=</span> <span class="st">"summary"</span>, annotation <span class="op">=</span> <span class="st">"latest"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Returning SDY269_PBMC_TIV_Geo_summary_latest_eset from cache</span></span></code></pre>
<p>If the connection was created with <code>verbose = TRUE</code>, some methods will display additional informations such as the valid dataset names.</p>
</div>
<div class="section level2">
<h2 id="plotting">Plotting<a class="anchor" aria-label="anchor" href="#plotting"></a>
</h2>
<p>A plot of a dataset can be generated using the <code>plot</code> method which automatically chooses the type of plot depending on the selected dataset.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sdy269</span><span class="op">$</span><span class="fu">plot</span><span class="op">(</span><span class="st">"hai"</span><span class="op">)</span></span></code></pre></div>
<p><img src="Intro_to_ImmuneSpaceR_files/figure-html/plotting-1.png" width="672" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sdy269</span><span class="op">$</span><span class="fu">plot</span><span class="op">(</span><span class="st">"elisa"</span><span class="op">)</span></span></code></pre></div>
<p><img src="Intro_to_ImmuneSpaceR_files/figure-html/plotting-2.png" width="672" style="display: block; margin: auto;"></p>
<p>However, the <code>type</code> argument can be used to manually select from “boxplot”, “heatmap”, “violin” and “line”.</p>
</div>
<div class="section level2">
<h2 id="cross-study-connections">Cross study connections<a class="anchor" aria-label="anchor" href="#cross-study-connections"></a>
</h2>
<p>To fetch data from multiple studies, simply create a connection at the project level.</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">con</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/CreateConnection.html">CreateConnection</a></span><span class="op">(</span><span class="st">""</span><span class="op">)</span></span></code></pre></div>
<p>This will instantiate a connection at the <code>Studies</code> level. Most functions work cross study connections just like they do on single studies.</p>
<p>You can get a list of datasets and gene expression matrices available accross all studies.</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">con</span></span></code></pre></div>
<pre><code><span><span class="co">## &lt;ImmuneSpaceConnection&gt;</span></span>
<span><span class="co">##   Study: Studies</span></span>
<span><span class="co">##   URL: https://datatools.immunespace.org/Studies/</span></span>
<span><span class="co">##   User: unknown_user at not_a_domain.com</span></span>
<span><span class="co">##   13 Available Datasets</span></span>
<span><span class="co">##     - cohort_membership</span></span>
<span><span class="co">##     - demographics</span></span>
<span><span class="co">##     - elisa</span></span>
<span><span class="co">##     - elispot</span></span>
<span><span class="co">##     - fcs_analyzed_result</span></span>
<span><span class="co">##     - fcs_control_files</span></span>
<span><span class="co">##     - fcs_sample_files</span></span>
<span><span class="co">##     - gene_expression_files</span></span>
<span><span class="co">##     - hai</span></span>
<span><span class="co">##     - hla_typing</span></span>
<span><span class="co">##     - mbaa</span></span>
<span><span class="co">##     - neut_ab_titer</span></span>
<span><span class="co">##     - pcr</span></span>
<span><span class="co">##   125 Available Expression Matrices</span></span></code></pre>
<p>In cross-study connections, <code>getDataset</code> and <code>getGEMatrix</code> will combine the requested datasets or expression matrices. See the dedicated vignettes for more information.</p>
<p>Likewise, <code>plot</code> will visualize accross studies. Note that in most cases the datasets will have too many cohorts/subjects, making the filtering of the data a necessity. The <code>colFilter</code> argument can be used here, as described in the <code>getDataset</code> section.</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">plotFilter</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/Rlabkey/man/makeFilter.html" class="external-link">makeFilter</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"cohort"</span>, <span class="st">"IN"</span>, <span class="st">"TIV 2010;TIV Group 2008"</span><span class="op">)</span>,</span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"study_time_collected"</span>, <span class="st">"EQUALS"</span>, <span class="st">"7"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">con</span><span class="op">$</span><span class="fu">plot</span><span class="op">(</span><span class="st">"elispot"</span>, filter <span class="op">=</span> <span class="va">plotFilter</span><span class="op">)</span></span></code></pre></div>
<p><img src="Intro_to_ImmuneSpaceR_files/figure-html/cross-connection-qplot-1.png" width="672" style="display: block; margin: auto;"></p>
<p>The figure above shows the ELISPOT results for two different years of TIV vaccine cohorts from two different studies.</p>
</div>
<div class="section level2">
<h2 id="session-info">Session info<a class="anchor" aria-label="anchor" href="#session-info"></a>
</h2>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/sessionInfo.html" class="external-link">sessionInfo</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## R version 4.2.2 (2022-10-31)</span></span>
<span><span class="co">## Platform: x86_64-apple-darwin17.0 (64-bit)</span></span>
<span><span class="co">## Running under: macOS Big Sur ... 10.16</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Matrix products: default</span></span>
<span><span class="co">## BLAS:   /Library/Frameworks/R.framework/Versions/4.2/Resources/lib/libRblas.0.dylib</span></span>
<span><span class="co">## LAPACK: /Library/Frameworks/R.framework/Versions/4.2/Resources/lib/libRlapack.dylib</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## locale:</span></span>
<span><span class="co">## [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## attached base packages:</span></span>
<span><span class="co">## [1] stats     graphics  grDevices utils     datasets  methods   base     </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## other attached packages:</span></span>
<span><span class="co">## [1] Rlabkey_2.9.0       jsonlite_1.8.4      httr_1.4.4         </span></span>
<span><span class="co">## [4] ImmuneSpaceR_1.27.1 rmarkdown_2.18      knitr_1.41         </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## loaded via a namespace (and not attached):</span></span>
<span><span class="co">##  [1] ncdfFlow_2.44.0       bitops_1.0-7          matrixStats_0.63.0   </span></span>
<span><span class="co">##  [4] fs_1.5.2              webshot_0.5.4         RColorBrewer_1.1-3   </span></span>
<span><span class="co">##  [7] rprojroot_2.0.3       Rgraphviz_2.42.0      tools_4.2.2          </span></span>
<span><span class="co">## [10] bslib_0.4.1           utf8_1.2.2            R6_2.5.1             </span></span>
<span><span class="co">## [13] KernSmooth_2.23-20    BiocGenerics_0.44.0   lazyeval_0.2.2       </span></span>
<span><span class="co">## [16] colorspace_2.0-3      flowWorkspace_4.10.0  withr_2.5.0          </span></span>
<span><span class="co">## [19] tidyselect_1.2.0      gridExtra_2.3         preprocessCore_1.60.0</span></span>
<span><span class="co">## [22] curl_4.3.3            compiler_4.2.2        textshaping_0.3.6    </span></span>
<span><span class="co">## [25] graph_1.76.0          cli_3.4.1             Biobase_2.58.0       </span></span>
<span><span class="co">## [28] TSP_1.2-1             desc_1.4.2            plotly_4.10.1        </span></span>
<span><span class="co">## [31] labeling_0.4.2        sass_0.4.4            caTools_1.18.2       </span></span>
<span><span class="co">## [34] scales_1.2.1          pkgdown_2.0.6         systemfonts_1.0.4    </span></span>
<span><span class="co">## [37] stringr_1.5.0         digest_0.6.31         ca_0.71.1            </span></span>
<span><span class="co">## [40] pkgconfig_2.0.3       htmltools_0.5.4       highr_0.9            </span></span>
<span><span class="co">## [43] fastmap_1.1.0         htmlwidgets_1.5.4     rlang_1.0.6          </span></span>
<span><span class="co">## [46] flowCore_2.10.0       farver_2.1.1          jquerylib_0.1.4      </span></span>
<span><span class="co">## [49] generics_0.1.3        gtools_3.9.4          dendextend_1.16.0    </span></span>
<span><span class="co">## [52] dplyr_1.0.10          magrittr_2.0.3        RProtoBufLib_2.10.0  </span></span>
<span><span class="co">## [55] Rcpp_1.0.9            munsell_0.5.0         S4Vectors_0.36.1     </span></span>
<span><span class="co">## [58] fansi_1.0.3           viridis_0.6.2         lifecycle_1.0.3      </span></span>
<span><span class="co">## [61] stringi_1.7.8         yaml_2.3.6            zlibbioc_1.44.0      </span></span>
<span><span class="co">## [64] gplots_3.1.3          grid_4.2.2            pillar_1.8.1         </span></span>
<span><span class="co">## [67] codetools_0.2-18      stats4_4.2.2          XML_3.99-0.13        </span></span>
<span><span class="co">## [70] glue_1.6.2            evaluate_0.19         data.table_1.14.6    </span></span>
<span><span class="co">## [73] vctrs_0.5.1           foreach_1.5.2         gtable_0.3.1         </span></span>
<span><span class="co">## [76] purrr_0.3.5           tidyr_1.2.1           heatmaply_1.4.0      </span></span>
<span><span class="co">## [79] assertthat_0.2.1      cachem_1.0.6          ggplot2_3.4.0        </span></span>
<span><span class="co">## [82] xfun_0.35             ragg_1.2.4            viridisLite_0.4.1    </span></span>
<span><span class="co">## [85] seriation_1.4.0       tibble_3.1.8          pheatmap_1.0.12      </span></span>
<span><span class="co">## [88] iterators_1.0.14      cytolib_2.10.0        registry_0.5-1       </span></span>
<span><span class="co">## [91] memoise_2.0.1</span></span></code></pre>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Greg Finak, Renan Sauteraud, Mike Jiang, Gil Guday, Leo Dashevskiy, Evan Henrich, Ju Yeong Kim, Lauren Wolfe, Helen Miller, Raphael Gottardo, ImmuneSpace Package Maintainer.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
